/*
 * JavaScript Object Query
 * ymv.joq v1.3
 * Fecha: 20161121
 * Autor: Yordanny Mej√≠as V. yordanny90@gmail.com
 */
$joq=function(a,b){return b=function(a){return this.constructor!=b?new b(a):void(this.o=a)},b.serialize=function(c,d){var e=[];return void 0!=c&&("string"==typeof c||"number"==typeof c||"boolean"==typeof c||"object"==typeof c&&c.constructor==File?e.push({name:d,value:c}):"object"==typeof c&&a.each(c,function(a,c){e=e.concat(b.serialize(c,d?d+"["+a+"]":a))})),e},b.fn=b.prototype,b.fn.serialize=function(a){return b.serialize(this.o,a)},b.fn.deserialize=function(b){var c=this;return a.each(b,function(a,b){b&&"object"==typeof b&&"string"==typeof b.name&&("[]"==b.name.substring(b.name.length-2)?c.add(b.name.substring(0,b.name.length-2).replace(/\]/g,""),b.value,"["):c.set(b.name.replace(/\]/g,""),b.value,"["))}),this},b.fn.val=function(){return this.o},b.fn.get=function(b,c){var d=this.o;return"string"!=typeof c&&(c="."),a.each(b.split(c),function(a,b){d=d&&"object"==typeof d?d[b]:void 0}),d},b.fn.add=function(b,c,d){var e=this.o;"string"!=typeof d&&(d=".");var f=b.split(d);return a.each(f,function(a,b){e&&(f.length-1==a?("undefined"!=typeof e[b]&&null!=e[b]||(e[b]=[]),"object"==typeof e[b]&&e[b].constructor==Array&&e[b].push(c)):e[b]||(e[b]={}),e=e[b])}),this},b.fn.set=function(b,c,d){var e=this.o;"string"!=typeof d&&(d=".");var f=b.split(d);return a.each(f,function(a,b){e&&(f.length-1==a?e[b]=c:e[b]||(e[b]={}),e=e[b])}),this},b.fn.unset=function(b,c){var d=this.o;"string"!=typeof c&&(c=".");var e=b.split(c),f=!1;return a.each(e,function(a,b){d&&(e.length-1==a&&(delete d[b],f=!0),d=d[b])}),f},b.fn.valueAsIndex=function(){return this.select(function(a,b){return a[b]},function(a,b){return b})},b.fn.select=function(a,c,d){var e=this.o;"function"!=typeof d&&(d=function(){return!0}),"function"!=typeof c&&(c=function(a,b){return a[b]}),"function"!=typeof a&&(a=function(a,b){return b});var f=new Object;return Object.keys(e).filter(function(b){d(e,b)&&(f[a(e,b)]=c(e,b))}),b(f)},b.fn.selectDefined=function(a,b,c){return"function"!=typeof c&&(c=function(){return!0}),this.select(a,b,function(a,b){return"undefined"!=typeof a[b]&&c(a,b)})},b.fn.selectUndefined=function(a,b,c){return"function"!=typeof c&&(c=function(){return!0}),this.select(a,b,function(a,b){return"undefined"==typeof a[b]&&c(a,b)})},b.fn.update=function(a,c,d,e){if(!a||"object"!=typeof a)return this;var f=this.o;if(a.constructor==b)var g=a.val();else var g=a;return"function"!=typeof e&&(e=function(a,b,c){return"undefined"!=typeof b[c]}),"function"!=typeof d&&(d=function(a,b,c){return b[c]}),"function"!=typeof c&&(c=function(a,b,c){return c}),Object.keys(f).filter(function(a){e(f,g,a)&&(f[c(f,g,a)]=d(f,g,a))}),this},b.fn.insert=function(a,c,d,e){if(!a||"object"!=typeof a)return this;var f=this.o;if(a.constructor==b)var g=a.val();else var g=a;return"function"!=typeof e&&(e=function(){return!0}),"function"!=typeof d&&(d=function(a,b,c){return b[c]}),"function"!=typeof c&&(c=function(a,b,c){return c}),Object.keys(g).filter(function(a){"undefined"==typeof f[a]&&e(f,g,a)&&(f[c(f,g,a)]=d(f,g,a))}),this},b.fn.delete=function(a,c,d){if(!a||"object"!=typeof a)return this;var e=this.o;if(a.constructor==b)var f=a.val();else var f=a;return"function"!=typeof d&&(d=function(){return!0}),"function"!=typeof c&&(c=function(a,b,c){return c}),Object.keys(f).filter(function(a){d(e,f,a)&&delete e[c(e,f,a)]}),this},b.fn.merge=function(a,c,d,e){if(!a||"object"!=typeof a)return this;var f=this.o;if(a.constructor==b)var g=a.val();else var g=a;return"function"!=typeof e&&(e=function(a,b,c){return"undefined"!=typeof b[c]}),"function"!=typeof d&&(d=function(a,b,c){return b[c]}),"function"!=typeof c&&(c=function(a,b,c){return c}),Object.keys(g).filter(function(a){e(f,g,a)&&(f[c(f,g,a)]=d(f,g,a))}),this},b}(jQuery);
