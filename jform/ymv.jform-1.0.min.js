(function($){var jbind={attr_root:"jbind",types:{},bind:function(attr_data_type,odata){var el=this;if(el.is("["+jbind.attr_once+"]")){el.attr(jbind.attr_root,null);}var data=odata;if(el.attr(attr_data_type)!=""){data=el.jbind_applyAttr(attr_data_type,"data,odata",[data,odata]);}if(el.attr(jbind.attr_before)){el.jbind_applyAttr(jbind.attr_before,"data,odata",[data,odata]);}if(typeof el.attr(jbind.attr_type)=="string"){$.each(el.attr(jbind.attr_type).split(","),function(k,fulltype){var type=fulltype,subtype="";if(type.search("-")>-1){subtype=type.split("-");type=subtype.shift();subtype=subtype.join("-");}if($.jbind(type)){var typedata=attr_data_type+"-"+fulltype;if(typeof el.attr(typedata)=="string"&&el.attr(typedata)!=""){typedata=el.jbind_applyAttr(typedata,"data,odata",[data,odata]);}else{typedata=data;}el.jbind_applyJs($.jbind(type),[typedata,odata,subtype]);}});}if(el.attr(jbind.attr_after)){el.jbind_applyAttr(jbind.attr_after,"data,odata",[data,odata]);}return true;}};$.extend(jbind,{attr_party:jbind.attr_root+"-party",attr_text:jbind.attr_root+"-text",attr_json:jbind.attr_root+"-json",attr_xml:jbind.attr_root+"-xml",attr_before:jbind.attr_root+"-before",attr_type:jbind.attr_root+"-type",attr_after:jbind.attr_root+"-after",attr_once:jbind.attr_root+"-once"});$.fn.jbind_applyJs=function(fn,oArgs){if(typeof fn==="function"){try{return fn.apply(this,oArgs);}catch(err){console.error(err);}}return undefined;};$.fn.jbind_applyJs_each=function(fn,oArgs){var resp=[];if(this.length){this.each(function(id,el){resp[id]=$(el).jbind_applyJs(fn,oArgs);});}return resp;};$.fn.jbind_applyAttr=function(attr,args,oArgs){try{if(typeof this.attr(attr)=="string"&&this.attr(attr)!=""){return Function(args,this.attr(attr)).apply(this,oArgs);}}catch(err){console.error(err);}return undefined;};$.fn.jbind_applyAttr_each=function(attr,args,oArgs){var resp=[];this.each(function(id,el){resp[id]=$(el).jbind_applyAttr(attr,args,oArgs);});return resp;};$.jbind=function(type,fn){if(typeof fn=="function"){jbind.types[type]=fn;}if(typeof jbind.types[type]=="function"){return jbind.types[type];}return false;};$.jbind_subval=function(data,index,notfound){var i;if(typeof index=="string"){index=index.split(".");}if(!Array.isArray(index)){index=[];}while(typeof data!="undefined"&&typeof(i=index.shift())!="undefined"){data=data[i];}if(typeof data=="undefined"){data=notfound;}return data;};$.jbind_findKeys=function(str){var regexp=/\{\{([^\{^\}]+)\}\}/;var rep={};var i=0;while((res=regexp.exec(str.substr(i)))){rep[res[0]]=res[1];i+=res.index+res[0].length;}return rep;};$.jbind_replaceKeys=function(str,keys,data){$.each(keys,function(i,e){str=str.split(i).join($.jbind_subval(data,e,""));});return str;};$.jbind_getParty=function(name){if(typeof name=="string"){return $($("["+jbind.attr_party+'="'+name+'"]'));}return $();};$.fn.jbind_getName=function(){return this.attr(jbind.attr_root);};$.fn.jbind_getNodes=function(name){if(typeof name=="undefined"){name="";}return $(this.filter("["+jbind.attr_root+'="'+name+'"]').add(this.find("["+jbind.attr_root+'="'+name+'"]')));};$.fn.jbind=function(name,odata,useParty){if(typeof name!="string"){return false;}var attr_data_type;if(typeof odata=="object"&&odata!=null){if(odata.constructor.name=="XMLDocument"){attr_data_type=jbind.attr_xml;}else{attr_data_type=jbind.attr_json;}}else{if(typeof odata=="string"){attr_data_type=jbind.attr_text;}else{return false;}}var el=this;if(useParty||typeof useParty=="undefined"){if(typeof useParty!="string"){useParty=name;}el=el.add($.jbind_getParty(useParty));}var nodes=$(el.jbind_getNodes(name).filter("["+attr_data_type+"]"));return{root_nodes:el,nodes:nodes,results:nodes.jbind_applyJs_each(jbind.bind,[attr_data_type,odata])};};$.jbind.my=jbind;})(jQuery);(function($){var jform={attr_root:"jform",request_fromAttr:{method:"method",url:"action",contentType:"enctype",},events:{},default_request:{method:"POST",url:"",contentType:"multipart/form-data"},default_config:{validateInput:function(i,e){return $(e).is(":valid,[type=hidden],[readonly]");},oninvalid:function(xhr,cfg,invalidInputs){invalidInputs.each(function(i,e){try{e.reportValidity();}catch(err){console.error(err);}});},onjbind:function(xhr,data,status){if(typeof this.attr(jform.attr_jbind)==="string"){this.jbind(this.attr(jform.attr_jbind),data);}}},filterInputs:'input[name][name!=""]:enabled,textarea[name][name!=""]:enabled,select[name][name!=""]:enabled',request_byName:{},config_byName:{},final_request:{beforeSend:function(xhr,cfg){try{if(typeof cfg.jform_config.beforeSend=="function"){cfg.jform_form.jbind_applyJs(cfg.jform_config.beforeSend,[xhr,cfg]);}if(!cfg.validInputs){xhr.abort();if(typeof cfg.jform_config.oninvalid=="function"){cfg.jform_form.jbind_applyJs(cfg.jform_config.oninvalid,[xhr,cfg,cfg.invalidInputs]);}}xhr.jform_form=cfg.jform_form;xhr.jform_config=cfg.jform_config;xhr.responseFields=cfg.responseFields;}catch(err){console.error("jform.beforeSend");console.error(err);}},complete:function(xhr,status){var form=xhr.jform_form;var config=xhr.jform_config;try{xhr.JSON=xhr[xhr.responseFields.json];xhr.TEXT=xhr[xhr.responseFields.text];xhr.XML=xhr[xhr.responseFields.xml];var data=undefined;if(status=="success"){if(typeof xhr.JSON!="undefined"){data=form.jbind_applyJs(config.onjson,[xhr,xhr.JSON,xhr.status]);if(typeof data=="undefined"){data=xhr.JSON;}}else{if(typeof xhr.XML!="undefined"){data=form.jbind_applyJs(config.onxml,[xhr,xhr.XML,xhr.status]);if(typeof data=="undefined"){data=xhr.XML;}}else{if(typeof xhr.TEXT!="undefined"){data=form.jbind_applyJs(config.ontext,[xhr,xhr.TEXT,xhr.status]);if(typeof data=="undefined"){data=xhr.TEXT;}}}}}form.jbind_applyJs(config["on"+xhr.status],[xhr,data,xhr.status]);form.jbind_applyJs(config["on"+status],[xhr,data,xhr.status]);form.jbind_applyJs(config.onjbind,[xhr,data,xhr.status]);form.jbind_applyJs(config.oncomplete,[xhr,data,xhr.status]);}catch(err){console.error("jform.complete");console.error(err);}if(typeof form.complete=="function"){form.jbind_applyJs(config.complete,[xhr,status]);}}}};$.extend(jform,{attr_party:jform.attr_root+"-party",attr_party_global:jform.attr_root+"-party_global",attr_jbind:jform.attr_root+"-jbind",});$(document).off("."+jform.attr_root);$(document).on("submit."+jform.attr_root,"form["+jform.attr_root+"]",function(event){event.preventDefault();$(this).jform_submit();});$.jform_request=function(name,request){if(request&&typeof request=="object"){jform.request_byName[name]=request;}if(typeof jform.request_byName[name]=="object"){return jform.request_byName[name];}return false;};$.jform_config=function(name,config){if(config&&typeof config=="object"){jform.config_byName[name]=config;}if(typeof jform.config_byName[name]=="object"){return jform.config_byName[name];}return false;};$.jform=function(name){return $($("["+jform.attr_root+'="'+name+'"]'));};$.jform_addEvent=function(e,attr,condition){if(typeof attr!="string"){attr=e;}var attr_on=jform.attr_root+"-on"+attr,attr_one=jform.attr_root+"-one"+attr;jform.events[e+"["+attr_one+"]"]={event:e,attr:attr_one,condition:condition};$(document).off(e+"."+jform.attr_root,"["+attr_one+"]").on(e+"."+jform.attr_root,"["+attr_one+"]",function(event){if(typeof condition=="function"&&!$(this).jbind_applyJs(condition,[event])){return false;}event.stopPropagation();$(this).jform_find($(this).attr(attr_one)).jform_submit();});jform.events[e+"["+attr_on+"]"]={event:e,attr:attr_on,condition:condition};$(document).off(e+"."+jform.attr_root,"["+attr_on+"]").on(e+"."+jform.attr_root,"["+attr_on+"]",function(event){if(typeof condition=="function"&&!$(this).jbind_applyJs(condition,[event])){return false;}event.stopPropagation();$(this).jform_find($(this).attr(attr_on)).jform_submit();});return{on:attr_on,one:attr_one};};$.each(["afterprint","beforeprint","beforeunload","error","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","storage","unload","blur","change","contextmenu","focus","input","invalid","reset","search","select","submit","keydown","keypress","keyup","click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","wheel","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","scroll","copy","cut","paste","abort","canplay","canplaythrough","cuechange","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","show","toggle",],function(i,e){$.jform_addEvent(e);});$.fn.is_jform=function(){return(typeof this.first().attr(jform.attr_root)=="string");};$.fn.jform_find=function(name){if(typeof name!="string"){return $();}var form=$(this.first());if(form.jform_getName()!==name){form=$(form.parents("["+jform.attr_root+'="'+name+'"]').first());}return form;};$.fn.jform_getName=function(){return this.attr(jform.attr_root);};$.jform_getParty=function(name){if(typeof name=="string"){return $($("["+jform.attr_party+'="'+name+'"]'));}return $();};$.jform_getGlobalInputs=function(){return $("["+jform.attr_party_global+"]").jform_getInputs();};$.fn.jform_getInputs=function(){return $(this.find(jform.filterInputs).add(this.filter(jform.filterInputs)));};$.fn.jform_getParty=function(){return $($.jform_getParty(this.attr(jform.attr_root)).add(this));};$.fn.jform_getPartyInputs=function(){return $.jform_getParty(this.attr(jform.attr_root)).jform_getInputs();};$.fn.jform_getConfigAjax=function(){if(!this.is_jform()){return false;}var form=$(this.first()),req={},config={},data,addVal,addNode,inputs;$.extend(config,jform.default_config,$.jform_config(form.jform_getName()));$.extend(req,jform.default_request,$.jform_request(form.jform_getName()));$.each(jform.request_fromAttr,function(i,e){if(typeof form.attr(e)=="string"){req[i]=form.attr(e);}});if(typeof req.beforeSend=="function"){config.beforeSend=req.beforeSend;}if(typeof req.complete=="function"){config.complete=req.complete;}$.extend(req,jform.final_request);if(!req.contentType){req.contentType="multipart/form-data";}if(req.contentType=="multipart/form-data"&&req.method.toUpperCase()=="POST"){req.contentType=false;}if(req.contentType===false){req.contentType=false;req.method="POST";data=new FormData();addVal=function(name,value){data.append(name,value);};addNode=function(i,e){if(e.files&&typeof e.files=="object"&&e.files.constructor==FileList){$.each(e.files,function(i,file){addVal(e.name,file);});}else{try{$.each($(e).serializeArray(),function(i,data){addVal(data.name,data.value);});}catch(err){}}};}else{if(req.contentType=="multipart/form-data"){req.contentType="";}data=[];addVal=function(name,value){data.push({name:name,value:value});};if(req.contentType=="json"){data={};addVal=function(name,value){data[name]=value;};}addNode=function(i,e){try{$.each($(e).serializeArray(),function(i,data){addVal(data.name,data.value);});}catch(err){}};}req.processData=(data.constructor!=FormData);inputs=form.jform_getInputs();partyInputs=form.jform_getPartyInputs().not(inputs);req.validInputs=true;if(config.validateInput){req.invalidInputs=$(inputs.add(partyInputs).not(config.validateInput));if(req.invalidInputs.length){req.validInputs=false;}}if(typeof req.data=="object"){if(Array.isArray(req.data)){$.each(req.data,function(i,e){if(typeof e=="object"&&typeof e.name!="undefined"&&typeof e.value!="undefined"){addVal(e.name,e.value);}});}else{$.each(req.data,addVal);}}$.jform_getGlobalInputs().not(inputs).each(addNode);partyInputs.each(addNode);inputs.each(addNode);if(req.contentType=="json"||req.contentType=="json/form-data"){data=JSON.stringify(data);}req.data=data;req.jform_form=form;req.jform_config=config;return req;};$.fn.jform_submit=function(){if(!this.is_jform()){return false;}var req=this.jform_getConfigAjax();return $.ajax(req);};$.jform.my=jform;})(jQuery);